# Исправления багов CV Platform

## 2025-11-25: Исправление переполнения PDF при большом объеме данных

### Проблема
При заполнении резюме большим количеством данных контент выходил за пределы одного листа A4, что выглядело как ошибка верстки. PDF не создавал дополнительные страницы автоматически.

### Решение
Реализована поддержка автоматического разбиения контента на несколько страниц:

#### 1. **Добавлен атрибут `wrap` для Page**
```jsx
<Page size="A4" style={styles.page} wrap>
```
Это позволяет @react-pdf/renderer автоматически создавать новые страницы при переполнении.

#### 2. **Управление разрывами страниц**
Для отдельных блоков контента добавлен атрибут `wrap={false}`, чтобы предотвратить разрыв внутри логических элементов:

- **Experience items** (`wrap={false}`) - опыт работы не разрывается посередине
- **Education items** (`wrap={false}`) - образование остается целым
- **Project items** (`wrap={false}`) - проекты не разделяются
- **Summary section** (`wrap={false}`) - краткое описание на одной странице

#### 3. **CSS свойство `break: 'avoid'`**
Добавлено в стили для дополнительной защиты от нежелательных разрывов:

```jsx
experienceItem: {
  marginBottom: 12,
  break: 'avoid' 
},
projectItem: {
  marginBottom: 10,
  break: 'avoid'
},
educationItem: {
  marginBottom: 8,
  break: 'avoid'
}
```

#### 4. **Фиксированный водяной знак**
Водяной знак теперь отображается на каждой странице:

```jsx
<Text style={styles.watermark} fixed>
  Made with CVPlatform.io
</Text>
```

#### 5. **Обновлен HTML Preview**
Убран фиксированный `min-h-[297mm]` в пользу автоматической высоты, чтобы превью корректно отображало многостраничный контент:

```jsx
style={{ 
  fontFamily: 'Inter, sans-serif',
  minHeight: 'auto',
  paddingBottom: '30mm'
}}
```

### Результат
- ✅ PDF корректно создает несколько страниц при большом объеме данных
- ✅ Логические блоки (опыт, образование, проекты) не разрываются посередине
- ✅ Водяной знак отображается на каждой странице
- ✅ Превью в браузере адаптируется под высоту контента

### Затронутые файлы
- `/src/components/PDFDocument.jsx` - основной компонент PDF
- `/App.jsx` - компонент превью резюме

### Технические детали
Используется библиотека **@react-pdf/renderer v3.4.4**, которая поддерживает:
- Автоматическое разбиение на страницы через `wrap`
- Управление разрывами через `wrap={false}` и `break: 'avoid'`
- Фиксированные элементы через атрибут `fixed`

### Тестирование
Для проверки:
1. Добавьте 5+ записей в опыте работы
2. Добавьте 3+ проекта с подробными описаниями
3. Заполните все секции резюме
4. Скачайте PDF и проверьте корректность разбиения на страницы

### Ссылки
- [React-PDF Documentation](https://react-pdf.org/)
- [Pagination in React-PDF](https://react-pdf.org/advanced#pagination)

